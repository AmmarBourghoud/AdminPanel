{"ast":null,"code":"export var middlewareHelper = function middlewareHelper(middlewares) {\n  return function (fetchFunction) {\n    return middlewares.length === 0 ? fetchFunction : middlewares.length === 1 ? middlewares[0](fetchFunction) : middlewares.reduceRight(function (acc, curr, idx) {\n      return idx === middlewares.length - 2 ? curr(acc(fetchFunction)) : curr(acc);\n    });\n  };\n};","map":{"version":3,"sources":["../src/middleware.ts"],"names":[],"mappings":"AAOA,OAAO,IAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,WAAD,EAAoC;AAAK,SAAA,UAAC,aAAD,EAAyB;AAC9F,WACI,WAAW,CAAC,MAAZ,KAAuB,CAAvB,GACG,aADH,GAEA,WAAW,CAAC,MAAZ,KAAuB,CAAvB,GACI,WAAW,CAAC,CAAD,CAAX,CAAe,aAAf,CADJ,GAEA,WAAW,CAAC,WAAZ,CAAwB,UAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAe;AACnC,aAAC,GAAG,KAAK,WAAW,CAAC,MAAZ,GAAqB,CAA9B,GAAmC,IAAI,CAAC,GAAG,CAAC,aAAD,CAAJ,CAAvC,GAA8D,IAAI,CAAC,GAAD,CAAlE;AAA8E,KADlF,CALJ;AADqE,GAAA;AAUxE,CAVM","sourcesContent":["import { WretcherOptions } from \"./wretcher\"\nimport { WretcherResponse } from \"./resolver\"\n\nexport type Middleware = (options?: {[key: string]: any}) => ConfiguredMiddleware\nexport type ConfiguredMiddleware = (next: FetchLike) => FetchLike\nexport type FetchLike = (url: string, opts: WretcherOptions) => Promise<WretcherResponse>\n\nexport const middlewareHelper = (middlewares: ConfiguredMiddleware[]) => (fetchFunction: FetchLike): FetchLike => {\n    return (\n        middlewares.length === 0 ?\n           fetchFunction :\n        middlewares.length === 1 ?\n            middlewares[0](fetchFunction) :\n        middlewares.reduceRight((acc, curr, idx): any =>\n            (idx === middlewares.length - 2) ? curr(acc(fetchFunction)) : curr(acc as any)\n        )\n    ) as FetchLike\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}