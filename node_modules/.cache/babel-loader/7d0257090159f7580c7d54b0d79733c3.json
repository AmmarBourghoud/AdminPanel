{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\abourgho\\\\Desktop\\\\ETNA\\\\GPE\\\\group-690338\\\\AdminPanel\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Badge,Card,CardBody,CardHeader,Col,Row,Table}from'reactstrap';import wretch from'wretch';import Moment from'moment';import mapboxgl from'mapbox-gl';import{relative}from'path';var Signal=/*#__PURE__*/function(_Component){_inherits(Signal,_Component);var _super=_createSuper(Signal);function Signal(props){var _this;_classCallCheck(this,Signal);_this=_super.call(this,props);_this._isMounted=false;_this.loadSignal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(resolve,reject){if(_this._isMounted)_this.setState({isLoading:true});wretch().url(\"http://localhost:8080/signal/\".concat(_this.props.match.params.id)).get().notFound(function(){_this.props.history.push('/signal');console.log('notFound');reject();}).json(function(res){console.log('res',res);wretch().url(\"http://localhost:8080/user/\".concat(res.author)).get().json(function(resUser){if(_this._isMounted)_this.setState({user:resUser});});if(_this._isMounted)_this.setState({isLoading:false,item:res});resolve();}).catch(function(err){console.log('err',err);reject();});}));case 1:case\"end\":return _context.stop();}}},_callee);}));_this.state={item:{},user:{},isLoading:false};return _this;}_createClass(Signal,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var map;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._isMounted=true;_context2.next=3;return this.loadSignal();case 3:mapboxgl.accessToken='pk.eyJ1IjoiY2VjZW5uYmwiLCJhIjoiY2szNGo3MHhxMDlqbTNwbzRtM2JnMG9iMiJ9.jPHdv3qcnvmAqe69UlA8LQ';map=new mapboxgl.Map({container:this.Mapcontainer,style:'mapbox://styles/mapbox/streets-v9',center:[2.4159,48.7651],zoom:16});map.on(\"load\",function(){map.loadImage(\"https://i.imgur.com/MK4NUzI.png\",function(error,image){if(error)throw error;map.addImage(\"custom-marker\",image);map.addLayer({id:\"markers\",type:\"symbol\",source:{type:\"geojson\",data:{type:'FeatureCollection',features:[{type:'Feature',properties:{},geometry:{type:\"Point\",coordinates:[2.4162,48.7649]}}]}},layout:{\"icon-image\":\"custom-marker\"}});});});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(prevProps,prevState,snapshot){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(prevProps.match.params.id!==this.props.match.params.id)){_context3.next=3;break;}_context3.next=3;return this.loadSignal();case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidUpdate(_x,_x2,_x3){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,signal=_this$state.item,isLoading=_this$state.isLoading,user=_this$state.user;if(isLoading)return null;console.log('signal',signal);return/*#__PURE__*/React.createElement(\"div\",{className:\"animated fadeIn\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"divSameHeight\"},/*#__PURE__*/React.createElement(Col,{lg:6,className:\"sameHeight\"},/*#__PURE__*/React.createElement(Card,{className:\"fullHeight\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"card card-accent-primary mb-3\"},/*#__PURE__*/React.createElement(\"strong\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"icon-info pr-1\"}),\"Signalement\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{responsive:true,striped:true,hover:true},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"id\"),/*#__PURE__*/React.createElement(\"td\",null,signal._id)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Nom\"),/*#__PURE__*/React.createElement(\"td\",null,signal.name)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Cat\\xE9gorie\"),/*#__PURE__*/React.createElement(\"td\",null,signal.category)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"td\",null,signal.description)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Ville\"),/*#__PURE__*/React.createElement(\"td\",null,signal.city)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"td\",null,signal.status)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"td\",null,Moment(signal.date).format('DD/MM/YY à HH:mm'))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Date de cr\\xE9ation\"),/*#__PURE__*/React.createElement(\"td\",null,Moment(signal.created_date).format('DD/MM/YY à HH:mm'))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Derni\\xE8re mis \\xE0 jour\"),/*#__PURE__*/React.createElement(\"td\",null,Moment(signal.last_update).format('DD/MM/YY à HH:mm')))))))),/*#__PURE__*/React.createElement(Col,{lg:6,className:\"sameHeight\"},/*#__PURE__*/React.createElement(Card,{className:\"fullHeight\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"card card-accent-warning mb-3\"},/*#__PURE__*/React.createElement(\"strong\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"icon-info pr-1\"}),\"Localisation\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"MapContent\",ref:function ref(x){_this2.Mapcontainer=x;}}))))),/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{className:\"card card-accent-success mb-3\"},/*#__PURE__*/React.createElement(\"strong\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"icon-info pr-1\"}),\"Auteur du signalement\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{responsive:true,striped:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Civilit\\xE9\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Nom\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Num\\xE9ro de t\\xE9l\\xE9phone\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",{key:user._id},/*#__PURE__*/React.createElement(\"td\",null,user.gender),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"\".concat(user.firstName,\" \").concat(user.lastName))),/*#__PURE__*/React.createElement(\"td\",null,user.email),/*#__PURE__*/React.createElement(\"td\",null,user.phone)))))))));}}]);return Signal;}(Component);export default Signal;","map":{"version":3,"sources":["C:/Users/abourgho/Desktop/ETNA/GPE/group-690338/AdminPanel/src/views/Signals/Signal.js"],"names":["React","Component","Badge","Card","CardBody","CardHeader","Col","Row","Table","wretch","Moment","mapboxgl","relative","Signal","props","_isMounted","loadSignal","Promise","resolve","reject","setState","isLoading","url","match","params","id","get","notFound","history","push","console","log","json","res","author","resUser","user","item","catch","err","state","accessToken","map","Map","container","Mapcontainer","style","center","zoom","on","loadImage","error","image","addImage","addLayer","type","source","data","features","properties","geometry","coordinates","layout","prevProps","prevState","snapshot","signal","_id","name","category","description","city","status","date","format","created_date","last_update","x","gender","firstName","lastName","email","phone"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport {Badge, Card, CardBody, CardHeader, Col, Row, Table} from 'reactstrap';\r\nimport wretch from 'wretch';\r\nimport Moment from 'moment';\r\nimport mapboxgl from 'mapbox-gl'\r\nimport { relative } from 'path';\r\n\r\n\r\n\r\nclass Signal extends Component {\r\n  _isMounted = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      item: {},\r\n      user: {},\r\n      isLoading: false\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this._isMounted = true;\r\n    await this.loadSignal();\r\n\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiY2VjZW5uYmwiLCJhIjoiY2szNGo3MHhxMDlqbTNwbzRtM2JnMG9iMiJ9.jPHdv3qcnvmAqe69UlA8LQ';\r\n\r\n    var map = new mapboxgl.Map({\r\n      container: this.Mapcontainer,\r\n      style: 'mapbox://styles/mapbox/streets-v9',\r\n      center: [2.4159, 48.7651],\r\n      zoom: 16\r\n    });\r\n\r\n    map.on(\"load\", function () {\r\n      map.loadImage(\"https://i.imgur.com/MK4NUzI.png\", function(error, image) {\r\n        if (error) throw error;\r\n        map.addImage(\"custom-marker\", image);\r\n        map.addLayer({\r\n          id: \"markers\",\r\n          type: \"symbol\",\r\n          source: {\r\n            type: \"geojson\",\r\n            data: {\r\n              type: 'FeatureCollection',\r\n              features: [\r\n                {\r\n                  type: 'Feature',\r\n                  properties: {},\r\n                  geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [2.4162, 48.7649]\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          layout: {\r\n            \"icon-image\": \"custom-marker\",\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.match.params.id !== this.props.match.params.id)\r\n      await this.loadSignal()\r\n  }\r\n\r\n  loadSignal = async () => {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._isMounted)\r\n        this.setState({\r\n          isLoading: true\r\n        });\r\n      wretch()\r\n        .url(`http://localhost:8080/signal/${this.props.match.params.id}`)\r\n        .get()\r\n        .notFound(() => {\r\n          this.props.history.push('/signal');\r\n          console.log('notFound');\r\n          reject()\r\n        })\r\n        .json(res => {\r\n          console.log('res', res)\r\n          wretch()\r\n            .url(`http://localhost:8080/user/${res.author}`)\r\n            .get()\r\n            .json(resUser => {\r\n              if (this._isMounted)\r\n              this.setState({\r\n                user: resUser,\r\n              });\r\n            });\r\n          if (this._isMounted)\r\n          this.setState({\r\n            isLoading: false,\r\n            item: res,\r\n          });\r\n          resolve()\r\n        })\r\n        .catch(err => {\r\n          console.log('err', err);\r\n          reject()\r\n        })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {item: signal, isLoading, user: user} = this.state\r\n\r\n    if (isLoading) return null\r\n\r\n    console.log('signal', signal)\r\n\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <div className=\"divSameHeight\">\r\n            <Col lg={6} className=\"sameHeight\">\r\n              <Card  className=\"fullHeight\">\r\n                <CardHeader className=\"card card-accent-primary mb-3\">\r\n                  <strong><i className=\"icon-info pr-1\"></i>Signalement</strong>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <Table responsive striped hover>\r\n                    <tbody>\r\n                    {/*<tr>*/}\r\n                      <tr>\r\n                        <th>id</th>\r\n                        <td>{signal._id}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Nom</th>\r\n                        <td>{signal.name }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Catégorie</th>\r\n                        <td>{signal.category}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Description</th>\r\n                        <td>{signal.description}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Ville</th>\r\n                        <td>{signal.city}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Status</th>\r\n                        <td>{signal.status}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Date</th>\r\n                        <td>{Moment(signal.date).format('DD/MM/YY à HH:mm')}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Date de création</th>\r\n                        <td>{Moment(signal.created_date).format('DD/MM/YY à HH:mm')}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Dernière mis à jour</th>\r\n                        <td>{Moment(signal.last_update).format('DD/MM/YY à HH:mm')}</td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </Table>\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n\r\n            <Col lg={6}  className=\"sameHeight\">\r\n              <Card className=\"fullHeight\">\r\n                <CardHeader className=\"card card-accent-warning mb-3\" >\r\n                  <strong><i className=\"icon-info pr-1\"></i>Localisation</strong>\r\n                </CardHeader>\r\n                <CardBody >\r\n                <div className='MapContent' ref={(x) => { this.Mapcontainer = x }}></div>\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n          </div>\r\n\r\n          <Col lg={12}>\r\n            <Card>\r\n              <CardHeader className=\"card card-accent-success mb-3\">\r\n                <strong><i className=\"icon-info pr-1\"></i>Auteur du signalement</strong>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Table responsive striped hover>\r\n                  <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">Civilité</th>\r\n                    <th scope=\"col\">Nom</th>\r\n                    <th scope=\"col\">Email</th>\r\n                    <th scope=\"col\">Numéro de téléphone</th>\r\n                  </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr key={user._id}>\r\n                      <td>{user.gender}</td>\r\n                      <td><strong>{`${user.firstName} ${user.lastName}`}</strong></td>\r\n                      <td>{user.email}</td>\r\n                      <td>{user.phone}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </Table>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Signal;\r\n"]},"metadata":{},"sourceType":"module"}