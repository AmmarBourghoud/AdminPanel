{"map":{"version":3,"sources":["static/js/18.5a6837c2.chunk.js"],"names":["this","push","552","module","__webpack_exports__","__webpack_require__","r","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","C_Users_abourgho_Desktop_ETNA_GPE_group_690338_AdminPanel_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_6__","react__WEBPACK_IMPORTED_MODULE_6___default","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","wretch__WEBPACK_IMPORTED_MODULE_12__","moment__WEBPACK_IMPORTED_MODULE_13__","moment__WEBPACK_IMPORTED_MODULE_13___default","mapbox_gl__WEBPACK_IMPORTED_MODULE_14__","mapbox_gl__WEBPACK_IMPORTED_MODULE_14___default","SignalsMap","_Component","Object","_super","props","_this","call","_isMounted","loadSignal","a","mark","_callee","wrap","_context","prev","next","abrupt","Promise","resolve","reject","setState","isLoading","url","get","json","res","items","catch","err","console","log","stop","state","key","value","_componentDidMount","_callee3","map","_context3","sent","accessToken","Map","container","Mapcontainer","style","center","zoom","on","loadImage","_ref2","_callee2","error","image","_context2","forEach","sig","addImage","_id","addLayer","id","type","source","data","features","properties","description","name","created_date","format","concat","geometry","coordinates","localization","long","lat","layout","icon-image","icon-allow-overlap","e","slice","Math","abs","lngLat","lng","Popup","setLngLat","setHTML","addTo","_x","_x2","apply","arguments","_componentDidUpdate","_callee4","prevProps","prevState","snapshot","_context4","match","params","_x3","_x4","_x5","_this2","createElement","className","lg","ref","x"],"mappings":"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"},"code":"(this[\"webpackJsonp@coreui/coreui-free-react-admin-template\"]=this[\"webpackJsonp@coreui/coreui-free-react-admin-template\"]||[]).push([[18],{552:function(e,t,a){\"use strict\";a.r(t);var n=a(491),r=a.n(n),i=a(492),o=a(145),c=a(146),s=a(148),u=a(147),l=a(2),p=a.n(l),m=a(513),d=a(514),f=a(515),h=a(551),g=a(516),v=a(497),b=a(495),y=a.n(b),M=a(502),w=a.n(M),j=(a(503),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.loadSignal=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e,t){n._isMounted&&n.setState({isLoading:!0}),Object(v.a)().url(\"http://localhost:8080/signal\").get().json((function(t){n._isMounted&&n.setState({isLoading:!1,items:t}),e(t)})).catch((function(e){console.log(\"err\",e),t()}))})));case 1:case\"end\":return e.stop()}}),e)}))),n.state={items:{},isLoading:!1},n}return Object(c.a)(a,[{key:\"componentDidMount\",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,e.next=3,this.loadSignal();case 3:t=e.sent,w.a.accessToken=\"pk.eyJ1IjoiY2VjZW5uYmwiLCJhIjoiY2szNGo3MHhxMDlqbTNwbzRtM2JnMG9iMiJ9.jPHdv3qcnvmAqe69UlA8LQ\",(a=new w.a.Map({container:this.Mapcontainer,style:\"mapbox://styles/mapbox/streets-v9\",center:[2.4159,48.7651],zoom:13})).on(\"load\",(function(){a.loadImage(\"https://i.imgur.com/MK4NUzI.png\",function(){var e=Object(i.a)(r.a.mark((function e(n,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}throw n;case 2:return e.next=4,t.forEach((function(e){a.addImage(e._id,i),a.addLayer({id:e._id,type:\"symbol\",source:{type:\"geojson\",data:{type:\"FeatureCollection\",features:[{type:\"Feature\",properties:{description:\"<strong>\"+e.name+\"</strong><p>\"+e.description+\"</p> <p>Date: \"+y()(e.created_date).format(\"DD/MM/YY \\xe0 HH:mm\")+\"</p> <p><a href='\"+\"/signal/\".concat(e._id,\"/\")+\"'><em>Voir la fiche du signalement</em></a> </p>\"},geometry:{type:\"Point\",coordinates:[e.localization.long,e.localization.lat]}}]}},layout:{\"icon-image\":e._id,\"icon-allow-overlap\":!0}}),a.on(\"click\",e._id,(function(e){for(var t=e.features[0].geometry.coordinates.slice(),n=e.features[0].properties.description;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new w.a.Popup).setLngLat(t).setHTML(n).addTo(a)}))}));case 4:case\"end\":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}));case 7:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"componentWillUnmount\",value:function(){this._isMounted=!1}},{key:\"componentDidUpdate\",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.id===this.props.match.params.id){e.next=3;break}return e.next=3,this.loadSignal();case 3:case\"end\":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this;return p.a.createElement(\"div\",{className:\"animated fadeIn\"},p.a.createElement(m.a,null,p.a.createElement(d.a,{lg:12},p.a.createElement(f.a,null,p.a.createElement(h.a,{className:\"card card-accent-warning mb-3\"},p.a.createElement(\"strong\",null,p.a.createElement(\"i\",{className:\"icon-info pr-1\"}),\"Localisation\")),p.a.createElement(g.a,null,p.a.createElement(\"div\",{className:\"FullMap\",ref:function(t){e.Mapcontainer=t}}))))))}}]),a}(l.Component));t.default=j}}]);","extractedComments":[]}