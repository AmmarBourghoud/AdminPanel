(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{537:function(e,t,a){"use strict";var n=a(18),r=a(48),l=a(2),c=a.n(l),s=a(61),o=a.n(s),i=a(481),m=a.n(i),u=a(482),d={className:o.a.string,cssModule:o.a.object,size:o.a.string,bordered:o.a.bool,borderless:o.a.bool,striped:o.a.bool,dark:o.a.bool,hover:o.a.bool,responsive:o.a.oneOfType([o.a.bool,o.a.string]),tag:u.d,responsiveTag:u.d,innerRef:o.a.oneOfType([o.a.func,o.a.string,o.a.object])},p=function(e){var t=e.className,a=e.cssModule,l=e.size,s=e.bordered,o=e.borderless,i=e.striped,d=e.dark,p=e.hover,E=e.responsive,h=e.tag,b=e.responsiveTag,f=e.innerRef,g=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(u.b)(m()(t,"table",!!l&&"table-"+l,!!s&&"table-bordered",!!o&&"table-borderless",!!i&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),a),y=c.a.createElement(h,Object(n.a)({},g,{ref:f,className:v}));if(E){var M=Object(u.b)(!0===E?"table-responsive":"table-responsive-"+E,a);return c.a.createElement(b,{className:M},y)}return y};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},553:function(e,t,a){"use strict";a.r(t);var n=a(491),r=a.n(n),l=a(492),c=a(145),s=a(146),o=a(148),i=a(147),m=a(2),u=a.n(m),d=a(513),p=a(514),E=a(515),h=a(551),b=a(516),f=a(537),g=a(497),v=a(495),y=a.n(v),M=a(502),N=a.n(M),j=(a(503),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.loadSignal=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n._isMounted&&n.setState({isLoading:!0}),Object(g.a)().url("http://localhost:8080/signal/".concat(n.props.match.params.id)).get().notFound((function(){n.props.history.push("/signal"),console.log("notFound"),t()})).json((function(t){console.log("res",t),Object(g.a)().url("http://localhost:8080/user/".concat(t.author)).get().json((function(e){n._isMounted&&n.setState({user:e})})),n._isMounted&&n.setState({isLoading:!1,item:t}),e()})).catch((function(e){console.log("err",e),t()}))})));case 1:case"end":return e.stop()}}),e)}))),n.state={item:{},user:{},isLoading:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,e.next=3,this.loadSignal();case 3:N.a.accessToken="pk.eyJ1IjoiY2VjZW5uYmwiLCJhIjoiY2szNGo3MHhxMDlqbTNwbzRtM2JnMG9iMiJ9.jPHdv3qcnvmAqe69UlA8LQ",(t=new N.a.Map({container:this.Mapcontainer,style:"mapbox://styles/mapbox/streets-v9",center:[2.4159,48.7651],zoom:16})).on("load",(function(){t.loadImage("https://i.imgur.com/MK4NUzI.png",(function(e,a){if(e)throw e;t.addImage("custom-marker",a),t.addLayer({id:"markers",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[2.4162,48.7649]}}]}},layout:{"icon-image":"custom-marker"}})}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.id===this.props.match.params.id){e.next=3;break}return e.next=3,this.loadSignal();case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.item,n=t.isLoading,r=t.user;return n?null:(console.log("signal",a),u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(d.a,null,u.a.createElement("div",{className:"divSameHeight"},u.a.createElement(p.a,{lg:6,className:"sameHeight"},u.a.createElement(E.a,{className:"fullHeight"},u.a.createElement(h.a,{className:"card card-accent-primary mb-3"},u.a.createElement("strong",null,u.a.createElement("i",{className:"icon-info pr-1"}),"Signalement")),u.a.createElement(b.a,null,u.a.createElement(f.a,{responsive:!0,striped:!0,hover:!0},u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",null,"id"),u.a.createElement("td",null,a._id)),u.a.createElement("tr",null,u.a.createElement("th",null,"Nom"),u.a.createElement("td",null,a.name)),u.a.createElement("tr",null,u.a.createElement("th",null,"Cat\xe9gorie"),u.a.createElement("td",null,a.category)),u.a.createElement("tr",null,u.a.createElement("th",null,"Description"),u.a.createElement("td",null,a.description)),u.a.createElement("tr",null,u.a.createElement("th",null,"Ville"),u.a.createElement("td",null,a.city)),u.a.createElement("tr",null,u.a.createElement("th",null,"Status"),u.a.createElement("td",null,a.status)),u.a.createElement("tr",null,u.a.createElement("th",null,"Date"),u.a.createElement("td",null,y()(a.date).format("DD/MM/YY \xe0 HH:mm"))),u.a.createElement("tr",null,u.a.createElement("th",null,"Date de cr\xe9ation"),u.a.createElement("td",null,y()(a.created_date).format("DD/MM/YY \xe0 HH:mm"))),u.a.createElement("tr",null,u.a.createElement("th",null,"Derni\xe8re mis \xe0 jour"),u.a.createElement("td",null,y()(a.last_update).format("DD/MM/YY \xe0 HH:mm")))))))),u.a.createElement(p.a,{lg:6,className:"sameHeight"},u.a.createElement(E.a,{className:"fullHeight"},u.a.createElement(h.a,{className:"card card-accent-warning mb-3"},u.a.createElement("strong",null,u.a.createElement("i",{className:"icon-info pr-1"}),"Localisation")),u.a.createElement(b.a,null,u.a.createElement("div",{className:"MapContent",ref:function(t){e.Mapcontainer=t}}))))),u.a.createElement(p.a,{lg:12},u.a.createElement(E.a,null,u.a.createElement(h.a,{className:"card card-accent-success mb-3"},u.a.createElement("strong",null,u.a.createElement("i",{className:"icon-info pr-1"}),"Auteur du signalement")),u.a.createElement(b.a,null,u.a.createElement(f.a,{responsive:!0,striped:!0,hover:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Civilit\xe9"),u.a.createElement("th",{scope:"col"},"Nom"),u.a.createElement("th",{scope:"col"},"Email"),u.a.createElement("th",{scope:"col"},"Num\xe9ro de t\xe9l\xe9phone"))),u.a.createElement("tbody",null,u.a.createElement("tr",{key:r._id},u.a.createElement("td",null,r.gender),u.a.createElement("td",null,u.a.createElement("strong",null,"".concat(r.firstName," ").concat(r.lastName))),u.a.createElement("td",null,r.email),u.a.createElement("td",null,r.phone))))))))))}}]),a}(m.Component));t.default=j}}]);
//# sourceMappingURL=12.fc5c0f42.chunk.js.map